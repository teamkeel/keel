model User {
    fields {
        assignedProduct Product 
        identity Identity @unique
    }
}


model Product {
    fields {
        name Text
        sku Text @unique
        stock ProductStock @unique
    }
    actions {
// Incomplete composite unique
        get getbySupplierSku(supplierSku: Text) {
            @where(product.stock.supplierSku == supplierSku)
        }
       
               // 'or' operand cannot guarantee uniqueness on composite unique fields
 get getbySupplierSku(supplierSku: Text, supplierId: ID) {
            @where(product.stock.supplierSku == supplierSku or product.stock.supplier.id == supplierId)
        }

        // Comparison with null cannot guarantee uniqueness
         get getbyWarehouseBarcode(barcode: Text) {
            @where(product.stock.warehouseBarcode == null)
        }

               // 'or' operand cannot guarantee uniqueness on additional field
        get getbySupplierSkuAndCode(supplierSku: Text, supplierCode: Text) {
            @where(product.stock.supplierSku == supplierSku and product.stock.supplier.supplierCode == supplierCode or product.name == "Shampoo")
        }
    }
}

model ProductStock {
    fields {
        warehouseBarcode Text @unique
        supplierSku Text 
        supplier Supplier
    }

    @unique([supplierSku, supplier])
}

model Supplier {
    fields {
        supplierCode Text @unique
    }
}