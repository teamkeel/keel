model User {
    fields {
        assignedProduct Product 
        identity Identity @unique
    }
}


model Product {
    fields {
        name Text
        sku Text @unique
        stock ProductStock @unique
    }
    actions {
        // Using != operator
        get getbySku(sku: Text) {
            @where(product.sku != sku)
        }

        // 'or' operand cannot guarantee uniqueness
        get getbySkuOrShampoo() {
            @where(product.sku == ctx.identity.user.assignedProduct.sku or product.name == "Shampoo")
        }

        // Comparison with null cannot guarantee uniqueness
        get getbyStockId(stockId: ID) {
            @where(product.stock.id == null)
        }
    }
}

model ProductStock {
    fields {
        warehouseBarcode Text @unique
        supplierSku Text 
        supplier Supplier
    }

    @unique([supplierSku, supplier])
}

model Supplier {
    fields {
        supplierCode Text @unique
    }
}