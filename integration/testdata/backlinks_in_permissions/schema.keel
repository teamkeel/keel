model User {
    fields {
        isAdult Boolean
        identity Identity
    }

    actions {
        create createUser() with (isAdult, identity.id)
    }

    @permission(
        expression: true,
        actions: [get, list, create, update]
    )
}

model Film {
    fields {
        title Text @unique
    }

    actions {
        create createFilm() with (title)
        get getFilm(title) {
            // Drawing from the context's identity 
            @permission(expression: ctx.identity.user.isAdult)
            // 
            @permission(expression: film.identity.user.isAdult)
            // 
            @permission(expression: film.identity.user.id == ctx.identity.user.id)
        }
    }

    @permission(
        expression: true,
        actions: [get, list, create, update]
    )
}
