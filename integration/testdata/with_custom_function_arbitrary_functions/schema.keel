message CountResult {
    count Number
}

message AdvancedSearchPayload {
    contains Text?
    startsWith Text?
    endsWith Text?
}

message CreateManyPayload {
    names Text[]
}

message PeoplePayload {
    ids ID[]
}

message PeopleResult {
    people Person[]
}

message CustomPersonSearchPayload {
    params Any
}

message CustomPersonSearchResult {
    people Any[]
}

message BulkPersonUpload {
    people Person[]
}

model Person {
    fields {
        name Text
    }

    functions {
        read countName(name) returns (CountResult)
        read countNameAdvanced(AdvancedSearchPayload) returns (CountResult)
        write createAndCount(name) returns (CountResult)
        write createManyAndCount(CreateManyPayload) returns (CountResult)
        read people(PeoplePayload) returns (PeopleResult)
        read customPersonSearch(CustomPersonSearchPayload) returns (CustomPersonSearchResult)
        read customSearch(Any) returns (Any)
        write bulkPersonUpload(BulkPersonUpload) returns (BulkPersonUpload)
    }

    @permission(
        expression: true,
        actions: [create, get, list, update, delete]
    )
}

api Web {
    models {
        Person
    }
}
