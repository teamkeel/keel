model Contestant {
    fields {
        name Text
        gold Number
        silver Number
        bronze Number
        disqualified Boolean @default(false)
        team Team
    }

    operations {
        create create() with (name, gold, silver, bronze, team.name) {
            @permission(expression: true)
        }
        list listRankings(name?, team.name?) {
            @orderBy(gold: desc, silver: desc, bronze: desc)
            @where(contestant.disqualified == false and contestant.team.disqualified == false)
            @permission(expression: true)
        }
    }
}

model Team {
    fields {
        name Text
        disqualified Boolean @default(false)
    }
}

api Test {
    models {
        Team
        Contestant
    }
}
